<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Realistic water visualization in 3D - 4.13</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.13/esri/themes/light/main.css" />
    <script src="https://js.arcgis.com/4.13/"></script>

    <script>
        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/FeatureLayer",
            "esri/layers/TileLayer",
            "esri/widgets/Slider"
        ], function (Map, MapView, FeatureLayer, TileLayer, Slider) {

            var map = new Map({
                // basemap: "streets"
            });

            const view = new MapView({
                container: "viewDiv",
                map: map
            });

            const imageryBasemap = new TileLayer({
                url: "https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer",
                opacity: 1
            });
            map.add(imageryBasemap);

            const topoBasemap = new TileLayer({
                url: "https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer",
                opacity: 0
            });
            map.add(topoBasemap);

            view.ui.add("menu", "top-right");

            const slider = new Slider({
                container: "waveSlider",
                min: 0,
                max: 100,
                labelsVisible: false,
                precision: 0,
                values: [0],
                draggableSegmentsEnabled: false,
                rangeLabelsVisible: true
            });

            // Renders three groups of ticks. The first is a basic set
            // of 25 ticks. The second places 4 ticks and adds custom
            // CSS classes to modify their styling. The third adds
            // a click event handler to the tick labels.
            slider.tickConfigs = [{
                // mode: "count",
                // values: 25
            }, {
                mode: "percent",
                values: [25, 50, 75],
                labelsVisible: true,
                tickCreatedFunction: function (initialValue, tickElement, labelElement) {
                    console.log({
                        initialValue,
                        tickElement,
                        labelElement
                    });
                    labelElement['innerHTML'] = 'aloe'
                    // tickElement.classList.add("mediumTicks");
                    // labelElement.classList.add("mediumLabels");
                }
            }];

            slider.labelFormatFunction = function (value, type) {
                return value === 0 ? value = 'topo' :
                    value === 100 ? value = 'imagery' :
                    value
                // return (type === "value" && value === 0) ? value.toFixed(0) : value;
            }

            //Slider Logic
            function changeOpacity(op) {
                var newOp = op / 100;
                imageryBasemap.opacity = (1.0 - newOp);
                topoBasemap.opacity = (newOp);
            }

            slider.on("thumb-drag", function (event) {
                const value = parseInt(event.value);
                console.log(value);

                changeOpacity(value);

            });


        });
    </script>
    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }

        #menu {
            padding: 1em;
            width: 250px;
        }

        #waveSlider {
            height: 50px;
            margin-top: 2em;
        }
    </style>
</head>

<body>
    <div id="viewDiv"></div>
    <div id="menu" class="esri-widget">
        <h4>Layer Opacity</h4>
        <div id="waveSlider"></div>

    </div>
</body>

</html>